This is where the main game logic lives.