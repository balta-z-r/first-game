(this["webpackJsonpthe-room"]=this["webpackJsonpthe-room"]||[]).push([[0],{1:function(e,o,t){e.exports=t(45)},21:function(e,o,t){e.exports=t.p+"static/media/logo.dc65f600.png"},22:function(e,o,t){e.exports=t.p+"static/media/Trouble-Is-Brewing.671462cd.mp3"},27:function(e,o){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAAAgCAMAAABzRoe3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjRDQjRBRTVCQjA0QjExRTlBNDkxRjY5NDU3QTBCQ0M4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjRDQjRBRTVDQjA0QjExRTlBNDkxRjY5NDU3QTBCQ0M4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NENCNEFFNTlCMDRCMTFFOUE0OTFGNjk0NTdBMEJDQzgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NENCNEFFNUFCMDRCMTFFOUE0OTFGNjk0NTdBMEJDQzgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4x6wuAAAAAHlBMVEVeLCkcEhscGjD9ohb8UAOUoLoqME5mcpH8/v4AAACcma48AAAACnRSTlP///////////8AsswszwAAAd9JREFUeNrsmNGOhCAMRauztPj/P7wwoCC2xWB5mESSzT7ceri3IozC9uMD3gBvgDeA3cDvmGeW44OdQUQfhxuPMMIHK4NZjQUOJzRA4oORwaRSGg7NGyDywcbgSSZC6wbIfDjhRw1mc1HBr468/Ql8aArGDB7zY4J4lK4350N1vQio+KzBoq+aPoUPDZ8DVPram2BdaVloPfV4Kn8PQKUg/rtMQIrBWEBlhSyh4BJgGh/y/qwBsOiswVih6h3+9oS/70JOBdzTcwHi4PVDfKhWmQbwusETgHTZlg82BitAOKikfXIGH2wMlq0knrROkGfwwcjghgCqbMAHTgYjg+F6F6aAoDrg9Wf8PMGFD72E1UbQNUgpBP9j7mED0gSJz/+cFhL2AKc1Hv7+Ph/HFxSDEkBtQJ6g5cNNgyKgOU2TLj2ku0FB1xvA69AiQgHJS2Q0QH6GD50t0BpwJwA9CZBP+3APnRMPMm8QIPKFZ0APEHTaDfKvtZgDEPPeG7V0F4QAnQYc87t2E66XUNyk/Q2Dmu6Rl2MoLeGZL+/D+X1CfAa82IBcgCTJpUD8KJEdqjqq0ysBdh1JtPj9KNIPIH8WSgXYkVG5wbjpATCtNdJMKGoK2AswKO9q823pX4ABAOiAwdSdaMECAAAAAElFTkSuQmCC"},28:function(e,o){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgCAMAAADt/IAXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkYxMkYwQTE5QjA0QjExRTk4MTNCQjE0Q0UxMEM4NkYyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkYxMkYwQTFBQjA0QjExRTk4MTNCQjE0Q0UxMEM4NkYyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RjEyRjBBMTdCMDRCMTFFOTgxM0JCMTRDRTEwQzg2RjIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RjEyRjBBMThCMDRCMTFFOTgxM0JCMTRDRTEwQzg2RjIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7gOi3WAAAAHlBMVEVeLCkcEhv9ohYcGjD8UAOUoLoqME5mcpH8/v4AAAAD02/MAAAACnRSTlP///////////8AsswszwAAAWdJREFUeNrsltFuwyAMRW+aYZP//+FBQgkZNjZs0l7ql0o9zvEVARQc/1z4BPgEmGmms9a5GWAsIIq5gtZhcdkPr6DQ3BBogWt+OAUX5auEBourfvgED8w8z1U/XIKSPhM6Oa3yzo8JQQaXJZI2f8RFPyYECewSb/wW7/1wCHIDF77vvG28P15Sfn6C558+wEjQBMi1pYbngFRO3vvhEBwWTx1hlWNCUBqIBB4dfBjAEDwM6kXAxjmW/JgZcG3QEFa55IdTUI9Kvkr1u1rlqh/eAQdhiC2u+eEfEJAq0QB5wM1ZWiHIfrgF5xKePeob4lh4vwkTl/1wDqi31dfrFbQ9Ft/8p+F9l98BlVNQBfoEmbsCtLw2zARoBKThk5MY4OZagMGAZkKQzzlx3WPcf1hS5SVgF+BIfzYCYQ8YvCyzHK/ZByUgCcfQJTB4+d6YeB5zAiINT3AzgC6g43dc8ONPByzwbwEGAG2MgKLG/4p7AAAAAElFTkSuQmCC"},30:function(e,o,t){e.exports=t.p+"static/media/Dungeon_Tileset.d30c4780.png"},32:function(e,o,t){e.exports=t.p+"static/media/Dark-Fog.e45428b9.mp3"},37:function(e,o,t){e.exports=t(49)},38:function(e,o,t){},45:function(e,o,t){"use strict";t.r(o);o.default={window:{width:1e3,height:800},game:{render:{viewportPadding:100},player:{acc:{vertical:5,horizontal:5},light:{far:100,near:40},sprite:{width:32,height:32}},map:{width:5e3,height:3e3,enemyIncrement:5},room:{width:9,height:9,radius:4,gridVals:{empty:0,enemy:1,end:2,redPotion:3,bluePotion:4,yellowPotion:5,greenPotion:6},padding:{px:20,nx:24,py:28,ny:20},floorSize:16,vertWallSize:7,horzWallSize:16,monsterGridTimeoutConstant:3e3,levelEnemyInterval:200},powerups:{red:{duration:5e3,probability:.05,gridVal:3,description:"Invincibility"},blue:{playerSpeed:7,duration:5e3,probability:.1,gridVal:4,description:"Speed"},yellow:{duration:5e3,probability:.1,gridVal:5,lightFar:200,lightNear:80,description:"Night Vision"},green:{enemySpeed:1e3,duration:5e3,probability:.5,gridVal:6,description:"Necromancer"}},enemy:{speed:500,levelUpFactor:.95}}}},49:function(e,o,t){"use strict";t.r(o);t(38);var n=t(5),r=t(21),a=t.n(r),i=t(0),l=t.n(i),s=t(6),m=t(10),p=t(22),g=t.n(p);function u(){var e=Object(n.a)(["\n  margin: 1em 1em;\n  padding: 0.25em 1em;\n  border: 2px solid white;\n  border-radius: 10px;\n  background: transparent;\n  color: white;\n  font-size: 200%;\n\n  &:active {\n    outline: none;\n  }\n"]);return u=function(){return e},e}function c(){var e=Object(n.a)(["\n  width: 60%;\n"]);return c=function(){return e},e}function d(){var e=Object(n.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  background: ",";\n"]);return d=function(){return e},e}var h=s.a.div(d(),"#1D1F27"),f=s.a.img(c()),y=s.a.button(u());var w=function(){return Object(i.useEffect)(function(){var e=new Audio(g.a);return e.play(),e.onended=function(){e.currentTime=0},function(){e.pause(),e.currentTime=0}}),l.a.createElement(h,null,l.a.createElement(f,{src:a.a,alt:"logo"}),l.a.createElement(m.b,{to:"/game"},l.a.createElement(y,null,"START")))},v=t(2),b=t(34),x=t(27),E=t.n(x),A=t(28),P=t.n(A),M=t(1),R=t.n(M),T=R.a.game.player.sprite.width,I=function e(o,t){var n=this;Object(v.a)(this,e),this.loadSprite=function(){n.walkingImgs=[],n.idleImgs=[],n.p.loadImage(E.a,function(e){for(var o=0;o<6;o++){var t=32*o,r=e.get(t,0,32,32);n.walkingImgs.push(r)}}),n.p.loadImage(P.a,function(e){for(var o=0;o<4;o++){var t=32*o,r=e.get(t,0,32,32);n.idleImgs.push(r)}})},this.draw=function(e){var o=e.x,t=e.y;if(n.p.push(),n.p.rectMode(n.p.CENTER),n.p.fill("#eae7af"),n.walkingImgs.length){n.isFlipped&&n.p.scale(-1,1);var r=n.p.frameCount,a=n.player.isIdle?n.idleImgs[Math.floor(r/5)%3]:n.walkingImgs[Math.floor(r/2)%5];n.p.imageMode(n.p.CENTER),n.p.image(a,(o+T/4)*(n.isFlipped?-1:1),t)}else n.p.rect(o,t,20,20);n.p.pop()},this.flipLeft=function(){return n.isFlipped=!0},this.flipRight=function(){return n.isFlipped=!1},this.p=o,this.player=t,this.isFlipped=!1,this.isSetup=!1},C=t(29),B=R.a.game.map.width,G=R.a.game.map.height,j=function(){function e(){Object(v.a)(this,e)}return Object(C.a)(e,null,[{key:"getElementWidth",value:function(e){var o=getComputedStyle(e);return e.clientWidth-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)}},{key:"getElementHeight",value:function(e){var o=getComputedStyle(e);return e.clientHeight-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)}},{key:"generateRandomEnemyPos",value:function(){return{x:(Math.random()>.5?1:-1)*(Math.floor(2*Math.random())+3),y:(Math.random()>.5?1:-1)*(Math.floor(2*Math.random())+3)}}}]),e}();j.getAscii=function(e){return e.charCodeAt(0)},j.getRoomRep=function(e,o){return"".concat(e,",").concat(o)},j.relativeToGlobal=function(e,o){return{x:B/2+176*e,y:G/2+176*o}},j.globalToRelative=function(e,o){return{x:(e-B/2)/176,y:(o-G/2)/176}},j.mapGlobalToPlayerViewport=function(e,o){var t=e.x,n=e.y,r=o.controls.globalPos,a=r.x,i=r.y,l=o.controls.windowPos;return{x:l.x+(t-a),y:l.y+(n-i)}},j.mapPlayerToRoomNumber=function(e){var o=e.x,t=e.y,n=o-B/2,r=t-G/2;return{x:Math.round(n/176),y:Math.round(r/176)}},j.getRoomBoundaries=function(e,o){var t=j.relativeToGlobal(e,o);return{minX:t.x-88,minY:t.y-88,maxX:t.x+88,maxY:t.y+88}},j.getHallwayBoundaries=function(e,o){switch(o){case"horizontal":return{minX:e.minX+66,maxX:e.maxX-66};case"vertical":return{minY:e.minY+66,maxY:e.maxY-66};default:return{minY:Number.MAX_VALUE,maxY:Number.MIN_VALUE}}},j.isBetween=function(e,o,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1;return e+n<=o&&o<=t-n};var N=R.a.game.map.width,O=R.a.game.map.height,k=R.a.game.player.acc.vertical,W=R.a.game.player.acc.horizontal,D=R.a.game.room.padding.px,z=R.a.game.room.padding.py,V=R.a.game.room.padding.nx,S=R.a.game.room.padding.ny,Y=R.a.game.render.viewportPadding,Q=R.a.game.powerups.blue.playerSpeed,U=function e(o,t){var n=this;Object(v.a)(this,e),this.tick=function(){n.player.isSetup||(n.globalPos={x:N/2,y:O/2},n.windowPos={x:n.p.width/2,y:n.p.height/2},n.player.isSetup=!0),n.handleInputAndCollision()},this.handleInputAndCollision=function(){var e=n.p.deltaTime/50,o=(n.player.powerups.blue?Q:k)*e,t=(n.player.powerups.blue?Q:W)*e,r=n.p.keyIsDown(j.getAscii("W"))||n.p.keyIsDown(n.p.UP_ARROW),a=n.p.keyIsDown(j.getAscii("S"))||n.p.keyIsDown(n.p.DOWN_ARROW),i=n.p.keyIsDown(j.getAscii("A"))||n.p.keyIsDown(n.p.LEFT_ARROW),l=n.p.keyIsDown(j.getAscii("D"))||n.p.keyIsDown(n.p.RIGHT_ARROW),s=j.mapPlayerToRoomNumber(n.globalPos),m=s.x,p=s.y,g=n.map.getRoomByCoords(m,p);if(g){var u=j.getRoomBoundaries(m,p),c=j.getHallwayBoundaries(u,"vertical"),d=c.minY,h=c.maxY,f=j.getHallwayBoundaries(u,"horizontal"),y=f.minX,w=f.maxX;if(r){var v=!1;n.globalPos.y-o<u.minY+S?g.top&&j.isBetween(y,n.globalPos.x,w)&&(n.globalPos.y-=o,v=!0):(n.globalPos.y-=o,v=!0),v&&n.windowPos.y-o>=Y&&(n.windowPos.y-=o)}if(a){var b=!1;n.globalPos.y-o>u.maxY-z?g.bottom&&j.isBetween(y,n.globalPos.x,w)&&(n.globalPos.y+=o,b=!0):(n.globalPos.y+=o,b=!0),b&&n.windowPos.y+o<=n.p.height-Y&&(n.windowPos.y+=o)}if(i){var x=!1;n.globalPos.x-t<u.minX+V?g.left&&j.isBetween(d,n.globalPos.y,h)&&(n.globalPos.x-=t,x=!0):(n.globalPos.x-=t,x=!0),x&&n.windowPos.x-t>=Y&&(n.windowPos.x-=t),n.player.sprite.flipLeft()}if(l){var E=!1;n.globalPos.x+t>u.maxX-D?g.right&&j.isBetween(d,n.globalPos.y,h)&&(n.globalPos.x+=t,E=!0):(n.globalPos.x+=t,E=!0),E&&n.windowPos.x+t<=n.p.width-Y&&(n.windowPos.x+=t),n.player.sprite.flipRight()}n.player.isIdle=!(r||a||i||l),n.player.playerMove()}},this.registerMap=function(e){return n.map=e},this.getPosData=function(){return[n.windowPos,n.globalPos]},this.p=o,this.player=t,this.globalPos=null,this.windowPos=null},Z=R.a.game.room.width,F=R.a.game.room.height,H=function e(o,t){var n=this;Object(v.a)(this,e),this.registerMap=function(e){n.map=e,n.controls.registerMap(e)},this.update=function(){var e;n.controls.tick(),(e=n.sprite).draw.apply(e,Object(b.a)(n.controls.getPosData()))},this.getRoomNRoomCoords=function(){var e=j.globalToRelative(n.controls.globalPos.x,n.controls.globalPos.y),o=n.map.rooms[j.getRoomRep(Math.round(e.x),Math.round(e.y))];return[o,{x:Math.round((e.x-o.x)*(Z+2)),y:Math.round((e.y-o.y)*(F+2))}]},this.playerMove=t,this.controls=new U(o,this),this.sprite=new I(o,this),this.powerups={red:!1,blue:!1,yellow:!1,green:!1}},L=R.a.game.room.gridVals.empty,J=R.a.game.room.gridVals.enemy,X=R.a.game.room.gridVals.end,K=R.a.game.room.width,q=R.a.game.room.height,_=R.a.game.room.radius,$=R.a.game.room.monsterGridTimeoutConstant,ee=R.a.game.room.levelEnemyInterval,oe=function e(o,t,n){var r=this;Object(v.a)(this,e),this.updateGrid=function(e,o,t){var n=r.grid[o+_][e+_];if(r.grid[o+_][e+_]=t,t===J)var a=setTimeout(function(){r.grid[o+_][e+_]=n===X?X:L,clearTimeout(a)},$+r.map.level*ee)},this.updateTunnels=function(e,o,t){if(r.gridTunnels[e][o]=t,t===J)var n=setTimeout(function(){r.gridTunnels[e][o]=L,clearTimeout(n)},$+r.map.level*ee)},this.getVal=function(e,o){return r.grid[o+_][e+_]},this.getValTunnels=function(e,o){return r.gridTunnels[e][o]},this.generatePowerup=function(e){r.updateGrid(Math.floor(Math.random()*(K-2))-_+1,Math.floor(Math.random()*(q-2))-_+1,e)},this.x=o,this.y=t,this.map=n,this.grid=new Array(K);for(var a=0;a<K;a++)this.grid[a]=new Array(q);this.gridTunnels=new Array(4);for(var i=0;i<4;i++)this.gridTunnels[i]=new Array(3);this.floorGrid=new Array(K);for(var l=0;l<K;l++){this.floorGrid[l]=new Array(q);for(var s=0;s<q;s++)this.floorGrid[l][s]=Math.floor(12*Math.random())}this.floorGridTunnels=new Array(4);for(var m=0;m<4;m++){this.floorGridTunnels[m]=new Array(3);for(var p=0;p<3;p++)this.floorGridTunnels[m][p]=Math.floor(12*Math.random())}this.end=!0},te=t(30),ne=t.n(te),re=R.a.game.room.floorSize,ae=R.a.game.room.vertWallSize,ie=R.a.game.room.horzWallSize,le=R.a.game.room.width,se=R.a.game.room.height,me=R.a.game.room.radius,pe=R.a.game.room.gridVals.enemy,ge=R.a.game.room.gridVals.end,ue=R.a.game.room.gridVals.redPotion,ce=R.a.game.room.gridVals.bluePotion,de=R.a.game.room.gridVals.yellowPotion,he=R.a.game.room.gridVals.greenPotion,fe=function e(o,t){var n=this;Object(v.a)(this,e),this.loadSprite=function(){n.p.loadImage(ne.a,function(e){n.vertWall=e.get(9,16,7,16),n.vertWallT=e.get(9,32,7,16),n.horzWall=e.get(16,0,16,16),n.horzWallB=e.get(16,64,16,16),n.corner=e.get(9,0,7,16),n.cornerB=e.get(9,64,7,16),n.floors=[e.get(96,0,16,16),e.get(112,0,16,16),e.get(128,0,16,16),e.get(144,0,16,16),e.get(96,16,16,16),e.get(112,16,16,16),e.get(128,16,16,16),e.get(144,16,16,16),e.get(96,32,16,16),e.get(112,32,16,16),e.get(128,32,16,16),e.get(144,32,16,16)],n.end=e.get(64,128,16,16),n.bones=e.get(112,112,16,16),n.redPotion=e.get(144,128,16,16),n.bluePotion=e.get(112,144,16,16),n.yellowPotion=e.get(96,144,16,16),n.greenPotion=e.get(96,128,16,16)})},this.draw=function(e){n.p.push(),n.p.rectMode(n.p.CENTER),n.p.fill("#eae7af"),Object.keys(e).forEach(function(o){var t=e[o];n.drawRoom(t,t.x,t.y)}),n.p.pop()},this.drawRoom=function(e,o,t){if(n.player.isSetup){var r=j.relativeToGlobal(o,t),a=j.mapGlobalToPlayerViewport(r,n.player);n.p.image(n.corner,a.x-(me+.5)*re-ae/2+(ie-ae)/2,a.y-(me+.5)*re-ie/2),n.p.image(n.corner,a.x+(me+.5)*re+ae/2+(ie-ae)/2,a.y-(me+.5)*re-ie/2),n.p.image(n.cornerB,a.x-(me+.5)*re-ae/2+(ie-ae)/2,a.y+(me+.5)*re+ie/2),n.p.image(n.cornerB,a.x+(me+.5)*re+ae/2+(ie-ae)/2,a.y+(me+.5)*re+ie/2);for(var i=0;i<le;i++){n.p.image(n.vertWall,a.x-(me+.5)*re-ae/2+(ie-ae)/2,(i-me)*re+a.y),n.p.image(n.vertWall,a.x+(me+.5)*re+ae/2+(ie-ae)/2,(i-me)*re+a.y);for(var l=0;l<se;l++){0===i&&(n.p.image(n.horzWall,(l-me)*re+a.x,a.y-(me+.5)*re-ie/2),n.p.image(n.horzWallB,(l-me)*re+a.x,a.y+(me+.5)*re+ie/2)),n.p.image(n.floors[e.floorGrid[l][i]],(l-me)*re+a.x,(i-me)*re+a.y);var s=null;switch(e.getVal(l-me,i-me)){case pe:s=n.bones;break;case ge:s=n.end;break;case ue:s=n.redPotion;break;case ce:s=n.bluePotion;break;case de:s=n.yellowPotion;break;case he:s=n.greenPotion}s&&n.p.image(s,(l-me)*re+a.x,(i-me)*re+a.y)}}if(e.top){for(var m=0;m<3;m++)n.p.image(n.floors[e.floorGridTunnels[0][m]],a.x+re*(m-1),-(me+1)*re+a.y);for(var p=-1;p<2;p++)e.getValTunnels(0,p+1)===pe&&(n.p.push(),n.p.imageMode(n.p.CENTER),n.p.image(n.bones,a.x+re*p+re/2,-(me+1)*re+a.y+re/2),n.p.pop())}if(e.bottom){for(var g=0;g<3;g++)n.p.image(n.floors[e.floorGridTunnels[1][g]],a.x+re*(g-1),(me+1)*re+a.y);n.p.image(n.vertWallT,2*-re+ae/2+(ie-ae)/2+1+a.x,(me+1)*re+a.y),n.p.image(n.vertWallT,2*re-ae/2+(ie-ae)/2-1+a.x,(me+1)*re+a.y);for(var u=-1;u<2;u++)e.getValTunnels(1,u+1)===pe&&(n.p.push(),n.p.imageMode(n.p.CENTER),n.p.image(n.bones,a.x+re*u+re/2,(me+1)*re+a.y+re/2),n.p.pop())}if(e.left){for(var c=0;c<3;c++)n.p.image(n.floors[e.floorGridTunnels[2][c]],-(me+1)*re+a.x,a.y+re*(c-1));n.p.image(n.horzWall,-(me+1)*re+a.x,a.y-ie-re),n.p.image(n.horzWallB,-(me+1)*re+a.x,a.y+ie+re),n.p.image(n.vertWall,a.x-(me+.5)*re-ae/2+(ie-ae)/2,re+a.y+re);for(var d=-1;d<2;d++)e.getValTunnels(2,d+1)===pe&&(n.p.push(),n.p.imageMode(n.p.CENTER),n.p.image(n.bones,-(me+1)*re+a.x+re/2,a.y+re*d+re/2),n.p.pop())}if(e.right){for(var h=0;h<3;h++)n.p.image(n.floors[e.floorGridTunnels[3][h]],(me+1)*re+a.x,a.y+re*(h-1));n.p.image(n.horzWall,(me+1)*re+a.x,a.y-ie-re),n.p.image(n.horzWallB,(me+1)*re+a.x,a.y+ie+re),n.p.image(n.vertWall,a.x+(me+.5)*re+ae/2+(ie-ae)/2,re+a.y+re);for(var f=-1;f<2;f++)e.getValTunnels(3,f+1)===pe&&(n.p.push(),n.p.imageMode(n.p.CENTER),n.p.image(n.bones,(me+1)*re+a.x+re/2,a.y+re*f+re/2),n.p.pop())}}},this.p=o,this.player=t},ye=R.a.game.powerups,we=function e(o,t){var n=this;Object(v.a)(this,e),this.initiateRooms=function(){n.startingRoom=new oe(0,0,n),n.rooms={"0,0":n.startingRoom};for(var e=[[0,1,n.startingRoom,"top"],[1,0,n.startingRoom,"left"],[0,-1,n.startingRoom,"bottom"],[-1,0,n.startingRoom,"right"]],o=["0,0"],t=[n.startingRoom],r=0;r<n.level;r++){var a=e.splice(Math.floor(Math.random()*e.length),1)[0];n.rooms[j.getRoomRep(a[0],a[1])]?r-=1:function(){a[2].end=!1;var r=new oe(a[0],a[1],n);r[a[3]]=a[2],a[2][n.getOppositeDir(a[3])]=r;for(var i=n.getSurroundings(r),l=0;l<i.length;l++){var s=i[l];n.rooms[j.getRoomRep(s[0],s[1])]||e.push(s)}t.push(r);var m=j.getRoomRep(r.x,r.y);n.rooms[m]=r,o.push(m),Object.keys(ye).forEach(function(e){var o=ye[e];Math.random()<o.probability&&r.generatePowerup(o.gridVal)})}()}for(var i=[],l=0;l<t.length;l++){var s=t[l];s.end&&i.push(s)}var m=i[Math.floor(Math.random()*i.length)];m.updateGrid(0,0,2),n.endingGlobalCoords=j.relativeToGlobal(m.x,m.y)},this.update=function(){n.sprite.draw(n.rooms)},this.isRoomExists=function(e,o){return!!n.rooms[j.getRoomRep(e,o)]},this.getSurroundings=function(e){return[[e.x,e.y+1,e,"top"],[e.x+1,e.y,e,"left"],[e.x,e.y-1,e,"bottom"],[e.x-1,e.y,e,"right"]]},this.getOppositeDir=function(e){switch(e){case"bottom":return"top";case"left":return"right";case"top":return"bottom";case"right":return"left";default:return""}},this.getRoomByCoords=function(e,o){return n.rooms[j.getRoomRep(e,o)]},this.level=1,this.player=t,this.sprite=new fe(o,t),this.initiateRooms()},ve=R.a.game.room.width,be=R.a.game.room.height,xe=R.a.game.room.radius,Ee=R.a.game.room.gridVals.enemy,Ae=function e(o){var t=this;Object(v.a)(this,e),this.move=function(e){for(var o=t.getSurroundings(t.roomCoords),n=t.getDist(j.relativeToGlobal(t.room.x+t.roomCoords.x/(ve+1),t.room.y+t.roomCoords.y/(be+1)),e.controls.globalPos),r=t.roomCoords,a=0;a<o.length;a++){var i=t.getDist(j.relativeToGlobal(t.room.x+o[a].x/(ve+1),t.room.y+o[a].y/(be+1)),e.controls.globalPos);i<n&&(r=o[a],n=i)}r.y===-xe-1?(t.room.updateTunnels(0,r.x+1,Ee),t.roomCoords=r):r.y===xe+1?(t.room.updateTunnels(1,r.x+1,Ee),t.roomCoords=r):r.x===-xe-1?(t.room.updateTunnels(2,r.y+1,Ee),t.roomCoords=r):r.x===xe+1?(t.room.updateTunnels(3,r.y+1,Ee),t.roomCoords=r):r.y<-xe-1?(t.room=t.room.top,t.room.updateTunnels(1,r.x+1,Ee),t.roomCoords=r,t.roomCoords.y=xe+1):r.y>xe+1?(t.room=t.room.bottom,t.room.updateTunnels(0,r.x+1,Ee),t.roomCoords=r,t.roomCoords.y=-xe-1):r.x<-xe-1?(t.room=t.room.left,t.room.updateTunnels(3,r.y+1,Ee),t.roomCoords=r,t.roomCoords.x=xe+1):r.x>xe+1?(t.room=t.room.right,t.room.updateTunnels(2,r.y+1,Ee),t.roomCoords=r,t.roomCoords.x=-xe-1):(t.room.updateGrid(r.x,r.y,Ee),t.roomCoords=r)},this.getSurroundings=function(e){for(var o=[{x:0,y:1},{x:1,y:0},{x:0,y:-1},{x:-1,y:0}],n=[],r=0;r<o.length;r++){var a=o[r],i={x:e.x+a.x,y:e.y+a.y};Math.abs(i.x)<=xe&&Math.abs(i.y)<=xe?n.push(i):i.x<=-xe-1&&Math.abs(i.y)<=1&&t.room.left?n.push(i):i.x>=xe+1&&Math.abs(i.y)<=1&&t.room.right?n.push(i):i.y<=-xe-1&&Math.abs(i.x)<=1&&t.room.top?n.push(i):i.y>=xe+1&&Math.abs(i.x)<=1&&t.room.bottom&&n.push(i)}return n},this.getDist=function(e,o){return Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2))},this.room=o,this.roomCoords=j.generateRandomEnemyPos()},Pe=R.a.game.player.light.far,Me=R.a.game.player.light.near,Re="transparent ".concat(Me,"px, rgba(0, 0, 0) ").concat(Pe,"px)"),Te=R.a.game.powerups.yellow,Ie="transparent ".concat(Te.lightNear,"px, rgba(0, 0, 0) ").concat(Te.lightFar,"px)");function Ce(e){var o=document.getElementById("spotlight");this.getSpotlight=function(){return o},this.getPlayer=function(){return e}}Ce.prototype.update=function(){var e=this.getSpotlight(),o=this.getPlayer(),t=o.controls.windowPos,n=t.x,r=t.y;e.style.backgroundImage="radial-gradient(circle at ".concat(n,"px ").concat(r,"px, ").concat(o.powerups.yellow?Ie:Re)};var Be=Ce;function Ge(e){this.p=e,this.element=document.getElementById("effect"),this.effects={}}Ge.prototype.addEffect=function(e,o,t){var n=this;this.effects[e]=o,setTimeout(function(){delete n.effects[e]},t)},Ge.prototype.draw=function(){var e=this,o=Object.keys(this.effects).map(function(o){return"".concat(e.effects[o],"<br/>")}).join(" ");this.element.innerHTML=o};var je=Ge,Ne=t(31),Oe=t.n(Ne),ke=R.a.game.map.width,We=R.a.game.map.height,De=R.a.game.room.radius,ze=R.a.game.room.gridVals.enemy,Ve=R.a.game.room.gridVals.end,Se=R.a.game.room.gridVals.redPotion,Ye=R.a.game.room.gridVals.bluePotion,Qe=R.a.game.room.gridVals.yellowPotion,Ue=R.a.game.room.gridVals.greenPotion,Ze=R.a.game.enemy.speed,Fe=R.a.game.enemy.levelUpFactor,He=R.a.game.powerups.red,Le=R.a.game.powerups.blue,Je=R.a.game.powerups.yellow,Xe=R.a.game.powerups.green,Ke=R.a.game.map.enemyIncrement,qe=function e(o){var t=this;Object(v.a)(this,e),this.update=function(){t.map.update(),t.player.update(),t.spotlight.update(),t.effectIndicator.draw()},this.enemiesMove=function(){t.enemies.forEach(function(e){return e.move(t.player)}),t.checkPlayerPos()===ze&&t.gameOver()},this.playerMove=function(){switch(t.checkPlayerPos()){case ze:t.gameOver();break;case Ve:t.levelUp();break;case Se:t.redPotionPowerup();break;case Ye:t.bluePotionPowerup();break;case Qe:t.yellowPotionPowerup();break;case Ue:t.greenPotionPowerup()}},this.checkPlayerPos=function(){var e=t.player.getRoomNRoomCoords(),o=e[0],n=e[1],r=0;return Math.abs(n.x)<=De&&Math.abs(n.y)<=De?r=o.getVal(n.x,n.y):n.x<=-De-1&&Math.abs(n.y)<=1&&o.left?r=o.getValTunnels(2,n.y+1):n.x>=De+1&&Math.abs(n.y)<=1&&o.right?r=o.getValTunnels(3,n.y+1):n.y<=-De-1&&Math.abs(n.x)<=1&&o.top?r=o.getValTunnels(0,n.x+1):n.y>=De+1&&Math.abs(n.x)<=1&&o.bottom&&(r=o.getValTunnels(1,n.x+1)),r},this.levelUp=function(){t.map.level+=1,t.map.initiateRooms(),t.player.controls.globalPos={x:ke/2,y:We/2},t.player.controls.windowPos={x:t.player.controls.p.width/2,y:t.player.controls.p.height/2};var e=Math.floor(t.map.level/Ke)+1;t.enemies=[];for(var o=0;o<e;o++)t.enemies.push(new Ae(t.map.startingRoom));t.initiateEnemyMovement(Ze*Math.pow(Fe,t.map.level));var n=document.getElementById("score");n&&(n.innerHTML="Level ".concat(t.map.level))},this.gameOver=function(){if(!t.player.powerups.red){var e=document.getElementById("gameover");e&&(e.style.top="50%"),t.p5instance.noLoop()}},this.redPotionPowerup=function(){t.powerupConsumed(),t.player.powerups.red=!0,t.redPotionTimeout&&clearTimeout(t.redPotionTimeout),t.effectIndicator.addEffect("RED",He.description,He.duration),setTimeout(function(){t.player.powerups.red=!1,t.redPotionTimeout=void 0},He.duration)},this.bluePotionPowerup=function(){t.powerupConsumed(),t.player.powerups.blue=!0,console.log("BLUE POWERUP UP"),t.bluePotionTimeout&&clearTimeout(t.bluePotionTimeout),t.effectIndicator.addEffect("BLUE",Le.description,Le.duration),t.bluePotionTimeout=setTimeout(function(){console.log("BLUE POWERUP DOWN"),t.player.powerups.blue=!1,t.bluePotionTimeout=void 0},Le.duration)},this.yellowPotionPowerup=function(){t.powerupConsumed(),t.player.powerups.yellow=!0,console.log("YELLOW POWERUP UP"),t.yellowPotionTimeout&&clearTimeout(t.yellowPotionTimeout),t.effectIndicator.addEffect("YELLOW",Je.description,Je.duration),t.yellowPotionTimeout=setTimeout(function(){console.log("YELLOW POWERUP DOWN"),t.player.powerups.yellow=!1,t.yellowPotionTimeout=void 0},Je.duration)},this.greenPotionPowerup=function(){t.powerupConsumed(),t.player.powerups.green=!0,console.log("GREEN POWERUP UP"),clearInterval(t.monsterInterval),t.monsterInterval=setInterval(t.enemiesMove,Xe.enemySpeed),t.greenPotionTimeout&&clearTimeout(t.greenPotionTimeout),t.effectIndicator.addEffect("GREEN",Xe.description,Xe.duration),t.greenPotionTimeout=setTimeout(function(){console.log("GREEN POWERUP DOWN"),clearInterval(t.monsterInterval),t.initiateEnemyMovement(),t.greenPotionTimeout=void 0},Xe.duration)},this.powerupConsumed=function(){var e=t.player.getRoomNRoomCoords(),o=e[0],n=e[1];o.updateGrid(n.x,n.y,0)},this.initiateEnemyMovement=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;clearInterval(t.monsterInterval),t.monsterInterval=setInterval(t.enemiesMove,e)},this.terminate=function(){t.p5instance.remove(),clearInterval(t.monsterInterval)},this.sketch=function(e){t.player=new H(e,t.playerMove),t.map=new we(e,t.player),t.enemies=[new Ae(t.map.startingRoom)],t.player.registerMap(t.map),t.spotlight=new Be(t.player),t.effectIndicator=new je(e),e.preload=function(){t.map.sprite.loadSprite(),t.player.sprite.loadSprite()},e.setup=function(){e.createCanvas(j.getElementWidth(o),j.getElementHeight(o)).parent(o),e.textFont("Helvetica"),e.textAlign(e.CENTER,e.CENTER),e.smooth()},e.draw=function(){e.background("#160f30"),t.update()},e.windowResized=function(){e.resizeCanvas(j.getElementWidth(o),j.getElementHeight(o))},t.initiateEnemyMovement()},this.p5instance=new Oe.a(this.sketch)},_e=t(32),$e=t.n(_e);function eo(){var e=Object(n.a)(["\n  position: relative;\n  width: 80%;\n  height: 60%;\n  border: 25px solid #b88846;\n  border-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='75' height='75'%3E%3Cg fill='none' stroke='%23B88846' stroke-width='2'%3E%3Cpath d='M1 1h73v73H1z'/%3E%3Cpath d='M8 8h59v59H8z'/%3E%3Cpath d='M8 8h16v16H8zM51 8h16v16H51zM51 51h16v16H51zM8 51h16v16H8z'/%3E%3C/g%3E%3Cg fill='%23B88846'%3E%3Ccircle cx='16' cy='16' r='2'/%3E%3Ccircle cx='59' cy='16' r='2'/%3E%3Ccircle cx='59' cy='59' r='2'/%3E%3Ccircle cx='16' cy='59' r='2'/%3E%3C/g%3E%3C/svg%3E\")\n    25;\n"]);return eo=function(){return e},e}function oo(){var e=Object(n.a)(["\n  margin: 20px;\n  border-bottom: 3px solid #eae7af;\n  color: #eae7af;\n  font-family: 'Lexend Zetta', sans-serif;\n  font-size: 40px;\n"]);return oo=function(){return e},e}function to(){var e=Object(n.a)(["\n  width: 50px;\n  height: 25px;\n  margin: 5px;\n  border: 1px solid #eae7af;\n  border-radius: 5px;\n  background: transparent;\n  color: #eae7af;\n  font-size: 16px;\n  font-weight: 100;\n"]);return to=function(){return e},e}function no(){var e=Object(n.a)(["\n  display: flex;\n  position: absolute;\n  z-index: 10;\n  top: -20%;\n  left: 50%;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border: 10px solid #160f30;\n  border-radius: 5px;\n  background: #01024e;\n  color: #eae7af;\n  font-size: 50px;\n  transform: translate(-50%, -50%);\n  transition: 0.2s ease all;\n"]);return no=function(){return e},e}function ro(){var e=Object(n.a)(["\n  position: absolute;\n  z-index: 20;\n  bottom: 0;\n  left: 0;\n  margin: 15px;\n  color: #eae7af;\n  font-family: 'Gayathri', sans-serif;\n  font-size: 24px;\n"]);return ro=function(){return e},e}function ao(){var e=Object(n.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-image: radial-gradient(\n    circle,\n    transparent 160px,\n    rgba(0, 0, 0) 200px\n  );\n"]);return ao=function(){return e},e}function io(){var e=Object(n.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n"]);return io=function(){return e},e}function lo(){var e=Object(n.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  background: radial-gradient(#003, #000);\n"]);return lo=function(){return e},e}var so=s.a.div(lo()),mo=s.a.div(io()),po=s.a.div(ao()),go=s.a.div(ro()),uo=s.a.div(no()),co=s.a.button(to()),ho=s.a.div(oo()),fo=s.a.div(eo()),yo=function(){var e=Object(i.useRef)(null);return Object(i.useEffect)(function(){document.title="The Room";var o=new Audio($e.a);o.play(),o.onended=function(){o.currentTime=0};var t=new qe(e.current);return function(){o.pause(),o.currentTime=0,t.terminate()}},[e]),l.a.createElement(so,null,l.a.createElement(uo,{id:"gameover"},"GAME OVER",l.a.createElement(m.b,{to:"/home"},l.a.createElement(co,null,"Home"))),l.a.createElement(mo,{id:"debug"}),l.a.createElement(ho,{id:"score"},"Level 1"),l.a.createElement(fo,{ref:e},l.a.createElement(go,{id:"effect"}),l.a.createElement(po,{id:"spotlight"})))},wo=t(9),vo=Object(wo.g)(function(){return l.a.createElement(wo.d,null,l.a.createElement(wo.b,{path:"/home",component:w}),l.a.createElement(wo.b,{path:"/game",component:yo}),l.a.createElement(wo.b,{path:"/",component:function(){return l.a.createElement(wo.a,{to:"/home"})}}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var bo=t(33),xo=t.n(bo),Eo=l.a.createElement(m.a,null,l.a.createElement(vo,null));xo.a.render(Eo,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.696922c0.chunk.js.map