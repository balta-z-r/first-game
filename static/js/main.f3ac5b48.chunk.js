(this["webpackJsonpthe-room"]=this["webpackJsonpthe-room"]||[]).push([[0],[,function(e,t,o){e.exports=o(49)},,,,,,,,,,,,,,,,,,,,function(e,t,o){e.exports=o.p+"static/media/logo.dc65f600.png"},function(e,t,o){e.exports=o.p+"static/media/Trouble-Is-Brewing.671462cd.mp3"},,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAAAgCAMAAABzRoe3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjRDQjRBRTVCQjA0QjExRTlBNDkxRjY5NDU3QTBCQ0M4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjRDQjRBRTVDQjA0QjExRTlBNDkxRjY5NDU3QTBCQ0M4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NENCNEFFNTlCMDRCMTFFOUE0OTFGNjk0NTdBMEJDQzgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NENCNEFFNUFCMDRCMTFFOUE0OTFGNjk0NTdBMEJDQzgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4x6wuAAAAAHlBMVEVeLCkcEhscGjD9ohb8UAOUoLoqME5mcpH8/v4AAACcma48AAAACnRSTlP///////////8AsswszwAAAd9JREFUeNrsmNGOhCAMRauztPj/P7wwoCC2xWB5mESSzT7ceri3IozC9uMD3gBvgDeA3cDvmGeW44OdQUQfhxuPMMIHK4NZjQUOJzRA4oORwaRSGg7NGyDywcbgSSZC6wbIfDjhRw1mc1HBr468/Ql8aArGDB7zY4J4lK4350N1vQio+KzBoq+aPoUPDZ8DVPram2BdaVloPfV4Kn8PQKUg/rtMQIrBWEBlhSyh4BJgGh/y/qwBsOiswVih6h3+9oS/70JOBdzTcwHi4PVDfKhWmQbwusETgHTZlg82BitAOKikfXIGH2wMlq0knrROkGfwwcjghgCqbMAHTgYjg+F6F6aAoDrg9Wf8PMGFD72E1UbQNUgpBP9j7mED0gSJz/+cFhL2AKc1Hv7+Ph/HFxSDEkBtQJ6g5cNNgyKgOU2TLj2ku0FB1xvA69AiQgHJS2Q0QH6GD50t0BpwJwA9CZBP+3APnRMPMm8QIPKFZ0APEHTaDfKvtZgDEPPeG7V0F4QAnQYc87t2E66XUNyk/Q2Dmu6Rl2MoLeGZL+/D+X1CfAa82IBcgCTJpUD8KJEdqjqq0ysBdh1JtPj9KNIPIH8WSgXYkVG5wbjpATCtNdJMKGoK2AswKO9q823pX4ABAOiAwdSdaMECAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgCAMAAADt/IAXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkYxMkYwQTE5QjA0QjExRTk4MTNCQjE0Q0UxMEM4NkYyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkYxMkYwQTFBQjA0QjExRTk4MTNCQjE0Q0UxMEM4NkYyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RjEyRjBBMTdCMDRCMTFFOTgxM0JCMTRDRTEwQzg2RjIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RjEyRjBBMThCMDRCMTFFOTgxM0JCMTRDRTEwQzg2RjIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7gOi3WAAAAHlBMVEVeLCkcEhv9ohYcGjD8UAOUoLoqME5mcpH8/v4AAAAD02/MAAAACnRSTlP///////////8AsswszwAAAWdJREFUeNrsltFuwyAMRW+aYZP//+FBQgkZNjZs0l7ql0o9zvEVARQc/1z4BPgEmGmms9a5GWAsIIq5gtZhcdkPr6DQ3BBogWt+OAUX5auEBourfvgED8w8z1U/XIKSPhM6Oa3yzo8JQQaXJZI2f8RFPyYECewSb/wW7/1wCHIDF77vvG28P15Sfn6C558+wEjQBMi1pYbngFRO3vvhEBwWTx1hlWNCUBqIBB4dfBjAEDwM6kXAxjmW/JgZcG3QEFa55IdTUI9Kvkr1u1rlqh/eAQdhiC2u+eEfEJAq0QB5wM1ZWiHIfrgF5xKePeob4lh4vwkTl/1wDqi31dfrFbQ9Ft/8p+F9l98BlVNQBfoEmbsCtLw2zARoBKThk5MY4OZagMGAZkKQzzlx3WPcf1hS5SVgF+BIfzYCYQ8YvCyzHK/ZByUgCcfQJTB4+d6YeB5zAiINT3AzgC6g43dc8ONPByzwbwEGAG2MgKLG/4p7AAAAAElFTkSuQmCC"},,function(e,t,o){e.exports=o.p+"static/media/Dungeon_Tileset.d30c4780.png"},function(e,t,o){e.exports=o.p+"static/media/7_firespin_spritesheet.c9ef197f.png"},function(e,t,o){e.exports=o.p+"static/media/8_protectioncircle_spritesheet.c304a897.png"},function(e,t,o){e.exports=o.p+"static/media/13_vortex_spritesheet.a8c4d5d4.png"},function(e,t,o){e.exports=o.p+"static/media/18_midnight_spritesheet.f7d9be13.png"},,function(e,t,o){e.exports=o.p+"static/media/Dark-Fog.e45428b9.mp3"},,,,,function(e,t,o){e.exports=o(53)},function(e,t,o){},,,,,,,function(e,t,o){"use strict";o.r(t);t.default={window:{width:1e3,height:800},game:{render:{viewportPadding:100},player:{acc:{vertical:5,horizontal:5},light:{far:100,near:40},sprite:{width:32,height:32}},map:{width:5e3,height:3e3,enemyIncrement:5},room:{width:9,height:9,radius:4,gridVals:{empty:0,enemy:1,end:2,redPotion:3,bluePotion:4,yellowPotion:5,greenPotion:6},padding:{px:20,nx:24,py:28,ny:20},floorSize:16,vertWallSize:7,horzWallSize:16,monsterGridTimeoutConstant:3e3,levelEnemyInterval:200},powerups:{red:{duration:5e3,probability:.05,gridVal:3,description:"Invincibility"},blue:{playerSpeed:7,duration:5e3,probability:.1,gridVal:4,description:"Speed"},yellow:{duration:5e3,probability:.1,gridVal:5,lightFar:200,lightNear:80,description:"Night Vision"},green:{enemySpeed:1e3,duration:5e3,probability:.5,gridVal:6,description:"Necromancer"}},enemy:{speed:500,levelUpFactor:.95}}}},,,,function(e,t,o){"use strict";o.r(t);o(42);var n=o(5),r=o(21),a=o.n(r),i=o(0),l=o.n(i),s=o(6),p=o(10),m=o(22),c=o.n(m);function g(){var e=Object(n.a)(["\n  margin: 1em 1em;\n  padding: 0.25em 1em;\n  border: 2px solid white;\n  border-radius: 10px;\n  background: transparent;\n  color: white;\n  font-size: 200%;\n\n  &:active {\n    outline: none;\n  }\n"]);return g=function(){return e},e}function u(){var e=Object(n.a)(["\n  width: 60%;\n"]);return u=function(){return e},e}function d(){var e=Object(n.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  background: ",";\n"]);return d=function(){return e},e}var h=s.a.div(d(),"#1D1F27"),f=s.a.img(u()),y=s.a.button(g());var v=function(){return Object(i.useEffect)(function(){var e=new Audio(c.a);return e.play(),e.onended=function(){e.currentTime=0},function(){e.pause(),e.currentTime=0}}),l.a.createElement(h,null,l.a.createElement(f,{src:a.a,alt:"logo"}),l.a.createElement(p.b,{to:"/game"},l.a.createElement(y,null,"START")))},w=o(2),b=o(38),x=o(27),E=o.n(x),A=o(28),P=o.n(A),M=o(1),R=o.n(M),T=R.a.game.player.sprite.width,I=function e(t,o){var n=this;Object(w.a)(this,e),this.loadSprite=function(){n.walkingImgs=[],n.idleImgs=[],n.p.loadImage(E.a,function(e){for(var t=0;t<6;t++){var o=32*t,r=e.get(o,0,32,32);n.walkingImgs.push(r)}}),n.p.loadImage(P.a,function(e){for(var t=0;t<4;t++){var o=32*t,r=e.get(o,0,32,32);n.idleImgs.push(r)}})},this.draw=function(e){var t=e.x,o=e.y;if(n.p.push(),n.p.rectMode(n.p.CENTER),n.p.fill("#eae7af"),n.walkingImgs.length){n.isFlipped&&n.p.scale(-1,1);var r=n.p.frameCount,a=n.player.isIdle?n.idleImgs[Math.floor(r/5)%3]:n.walkingImgs[Math.floor(r/2)%5];n.p.imageMode(n.p.CENTER),n.p.image(a,(t+T/4)*(n.isFlipped?-1:1),o)}else n.p.rect(t,o,20,20);n.p.pop()},this.flipLeft=function(){return n.isFlipped=!0},this.flipRight=function(){return n.isFlipped=!1},this.p=t,this.player=o,this.isFlipped=!1,this.isSetup=!1},C=o(29),B=R.a.game.map.width,G=R.a.game.map.height,N=function(){function e(){Object(w.a)(this,e)}return Object(C.a)(e,null,[{key:"getElementWidth",value:function(e){var t=getComputedStyle(e);return e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)}},{key:"getElementHeight",value:function(e){var t=getComputedStyle(e);return e.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)}},{key:"generateRandomEnemyPos",value:function(){return{x:(Math.random()>.5?1:-1)*(Math.floor(2*Math.random())+3),y:(Math.random()>.5?1:-1)*(Math.floor(2*Math.random())+3)}}}]),e}();N.getAscii=function(e){return e.charCodeAt(0)},N.getRoomRep=function(e,t){return"".concat(e,",").concat(t)},N.relativeToGlobal=function(e,t){return{x:B/2+176*e,y:G/2+176*t}},N.globalToRelative=function(e,t){return{x:(e-B/2)/176,y:(t-G/2)/176}},N.mapGlobalToPlayerViewport=function(e,t){var o=e.x,n=e.y,r=t.controls.globalPos,a=r.x,i=r.y,l=t.controls.windowPos;return{x:l.x+(o-a),y:l.y+(n-i)}},N.mapPlayerToRoomNumber=function(e){var t=e.x,o=e.y,n=t-B/2,r=o-G/2;return{x:Math.round(n/176),y:Math.round(r/176)}},N.getRoomBoundaries=function(e,t){var o=N.relativeToGlobal(e,t);return{minX:o.x-88,minY:o.y-88,maxX:o.x+88,maxY:o.y+88}},N.getHallwayBoundaries=function(e,t){switch(t){case"horizontal":return{minX:e.minX+66,maxX:e.maxX-66};case"vertical":return{minY:e.minY+66,maxY:e.maxY-66};default:return{minY:Number.MAX_VALUE,maxY:Number.MIN_VALUE}}},N.isBetween=function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1;return e+n<=t&&t<=o-n};var O=R.a.game.map.width,j=R.a.game.map.height,k=R.a.game.player.acc.vertical,W=R.a.game.player.acc.horizontal,D=R.a.game.room.padding.px,z=R.a.game.room.padding.py,V=R.a.game.room.padding.nx,S=R.a.game.room.padding.ny,Y=R.a.game.render.viewportPadding,U=R.a.game.powerups.blue.playerSpeed,Q=function e(t,o){var n=this;Object(w.a)(this,e),this.tick=function(){n.player.isSetup||(n.globalPos={x:O/2,y:j/2},n.windowPos={x:n.p.width/2,y:n.p.height/2},n.player.isSetup=!0),n.handleInputAndCollision()},this.handleInputAndCollision=function(){var e=n.p.deltaTime/50,t=(n.player.powerups.blue?U:k)*e,o=(n.player.powerups.blue?U:W)*e,r=n.p.keyIsDown(N.getAscii("W"))||n.p.keyIsDown(n.p.UP_ARROW),a=n.p.keyIsDown(N.getAscii("S"))||n.p.keyIsDown(n.p.DOWN_ARROW),i=n.p.keyIsDown(N.getAscii("A"))||n.p.keyIsDown(n.p.LEFT_ARROW),l=n.p.keyIsDown(N.getAscii("D"))||n.p.keyIsDown(n.p.RIGHT_ARROW),s=N.mapPlayerToRoomNumber(n.globalPos),p=s.x,m=s.y,c=n.map.getRoomByCoords(p,m);if(c){var g=N.getRoomBoundaries(p,m),u=N.getHallwayBoundaries(g,"vertical"),d=u.minY,h=u.maxY,f=N.getHallwayBoundaries(g,"horizontal"),y=f.minX,v=f.maxX;if(r){var w=!1;n.globalPos.y-t<g.minY+S?c.top&&N.isBetween(y,n.globalPos.x,v)&&(n.globalPos.y-=t,w=!0):(n.globalPos.y-=t,w=!0),w&&n.windowPos.y-t>=Y&&(n.windowPos.y-=t)}if(a){var b=!1;n.globalPos.y-t>g.maxY-z?c.bottom&&N.isBetween(y,n.globalPos.x,v)&&(n.globalPos.y+=t,b=!0):(n.globalPos.y+=t,b=!0),b&&n.windowPos.y+t<=n.p.height-Y&&(n.windowPos.y+=t)}if(i){var x=!1;n.globalPos.x-o<g.minX+V?c.left&&N.isBetween(d,n.globalPos.y,h)&&(n.globalPos.x-=o,x=!0):(n.globalPos.x-=o,x=!0),x&&n.windowPos.x-o>=Y&&(n.windowPos.x-=o),n.player.sprite.flipLeft()}if(l){var E=!1;n.globalPos.x+o>g.maxX-D?c.right&&N.isBetween(d,n.globalPos.y,h)&&(n.globalPos.x+=o,E=!0):(n.globalPos.x+=o,E=!0),E&&n.windowPos.x+o<=n.p.width-Y&&(n.windowPos.x+=o),n.player.sprite.flipRight()}n.player.isIdle=!(r||a||i||l),n.player.playerMove()}},this.registerMap=function(e){return n.map=e},this.getPosData=function(){return[n.windowPos,n.globalPos]},this.p=t,this.player=o,this.globalPos=null,this.windowPos=null},Z=R.a.game.room.width,F=R.a.game.room.height,H=function e(t,o){var n=this;Object(w.a)(this,e),this.registerMap=function(e){n.map=e,n.controls.registerMap(e)},this.update=function(){var e;n.controls.tick(),(e=n.sprite).draw.apply(e,Object(b.a)(n.controls.getPosData()))},this.getRoomNRoomCoords=function(){var e=N.globalToRelative(n.controls.globalPos.x,n.controls.globalPos.y),t=n.map.rooms[N.getRoomRep(Math.round(e.x),Math.round(e.y))];return[t,{x:Math.round((e.x-t.x)*(Z+2)),y:Math.round((e.y-t.y)*(F+2))}]},this.playerMove=o,this.controls=new Q(t,this),this.sprite=new I(t,this),this.powerups={red:!1,blue:!1,yellow:!1,green:!1}},L=R.a.game.room.gridVals.empty,J=R.a.game.room.gridVals.enemy,X=R.a.game.room.gridVals.end,K=R.a.game.room.width,q=R.a.game.room.height,_=R.a.game.room.radius,$=R.a.game.room.monsterGridTimeoutConstant,ee=R.a.game.room.levelEnemyInterval,te=function e(t,o,n){var r=this;Object(w.a)(this,e),this.updateGrid=function(e,t,o){var n=r.grid[t+_][e+_];if(r.grid[t+_][e+_]=o,o===J)var a=setTimeout(function(){r.grid[t+_][e+_]=n===X?X:L,clearTimeout(a)},$+r.map.level*ee)},this.updateTunnels=function(e,t,o){if(r.gridTunnels[e][t]=o,o===J)var n=setTimeout(function(){r.gridTunnels[e][t]=L,clearTimeout(n)},$+r.map.level*ee)},this.getVal=function(e,t){return r.grid[t+_][e+_]},this.getValTunnels=function(e,t){return r.gridTunnels[e][t]},this.generatePowerup=function(e){r.updateGrid(Math.floor(Math.random()*(K-2))-_+1,Math.floor(Math.random()*(q-2))-_+1,e)},this.x=t,this.y=o,this.map=n,this.grid=new Array(K);for(var a=0;a<K;a++)this.grid[a]=new Array(q);this.gridTunnels=new Array(4);for(var i=0;i<4;i++)this.gridTunnels[i]=new Array(3);this.floorGrid=new Array(K);for(var l=0;l<K;l++){this.floorGrid[l]=new Array(q);for(var s=0;s<q;s++)this.floorGrid[l][s]=Math.floor(12*Math.random())}this.floorGridTunnels=new Array(4);for(var p=0;p<4;p++){this.floorGridTunnels[p]=new Array(3);for(var m=0;m<3;m++)this.floorGridTunnels[p][m]=Math.floor(12*Math.random())}this.end=!0},oe=o(30),ne=o.n(oe),re=R.a.game.room.floorSize,ae=R.a.game.room.vertWallSize,ie=R.a.game.room.horzWallSize,le=R.a.game.room.width,se=R.a.game.room.height,pe=R.a.game.room.radius,me=R.a.game.room.gridVals.enemy,ce=R.a.game.room.gridVals.end,ge=R.a.game.room.gridVals.redPotion,ue=R.a.game.room.gridVals.bluePotion,de=R.a.game.room.gridVals.yellowPotion,he=R.a.game.room.gridVals.greenPotion,fe=function e(t,o){var n=this;Object(w.a)(this,e),this.loadSprite=function(){n.p.loadImage(ne.a,function(e){n.vertWall=e.get(9,16,7,16),n.vertWallT=e.get(9,32,7,16),n.horzWall=e.get(16,0,16,16),n.horzWallB=e.get(16,64,16,16),n.corner=e.get(9,0,7,16),n.cornerB=e.get(9,64,7,16),n.floors=[e.get(96,0,16,16),e.get(112,0,16,16),e.get(128,0,16,16),e.get(144,0,16,16),e.get(96,16,16,16),e.get(112,16,16,16),e.get(128,16,16,16),e.get(144,16,16,16),e.get(96,32,16,16),e.get(112,32,16,16),e.get(128,32,16,16),e.get(144,32,16,16)],n.end=e.get(64,128,16,16),n.bones=e.get(112,112,16,16),n.redPotion=e.get(144,128,16,16),n.bluePotion=e.get(112,144,16,16),n.yellowPotion=e.get(96,144,16,16),n.greenPotion=e.get(96,128,16,16)})},this.draw=function(e){n.p.push(),n.p.rectMode(n.p.CENTER),n.p.fill("#eae7af"),Object.keys(e).forEach(function(t){var o=e[t];n.drawRoom(o,o.x,o.y)}),n.p.pop()},this.drawRoom=function(e,t,o){if(n.player.isSetup){var r=N.relativeToGlobal(t,o),a=N.mapGlobalToPlayerViewport(r,n.player);n.p.image(n.corner,a.x-(pe+.5)*re-ae/2+(ie-ae)/2,a.y-(pe+.5)*re-ie/2),n.p.image(n.corner,a.x+(pe+.5)*re+ae/2+(ie-ae)/2,a.y-(pe+.5)*re-ie/2),n.p.image(n.cornerB,a.x-(pe+.5)*re-ae/2+(ie-ae)/2,a.y+(pe+.5)*re+ie/2),n.p.image(n.cornerB,a.x+(pe+.5)*re+ae/2+(ie-ae)/2,a.y+(pe+.5)*re+ie/2);for(var i=0;i<le;i++){n.p.image(n.vertWall,a.x-(pe+.5)*re-ae/2+(ie-ae)/2,(i-pe)*re+a.y),n.p.image(n.vertWall,a.x+(pe+.5)*re+ae/2+(ie-ae)/2,(i-pe)*re+a.y);for(var l=0;l<se;l++){0===i&&(n.p.image(n.horzWall,(l-pe)*re+a.x,a.y-(pe+.5)*re-ie/2),n.p.image(n.horzWallB,(l-pe)*re+a.x,a.y+(pe+.5)*re+ie/2)),n.p.image(n.floors[e.floorGrid[l][i]],(l-pe)*re+a.x,(i-pe)*re+a.y);var s=null;switch(e.getVal(l-pe,i-pe)){case me:s=n.bones;break;case ce:s=n.end;break;case ge:s=n.redPotion;break;case ue:s=n.bluePotion;break;case de:s=n.yellowPotion;break;case he:s=n.greenPotion}s&&n.p.image(s,(l-pe)*re+a.x,(i-pe)*re+a.y)}}if(e.top){for(var p=0;p<3;p++)n.p.image(n.floors[e.floorGridTunnels[0][p]],a.x+re*(p-1),-(pe+1)*re+a.y);for(var m=-1;m<2;m++)e.getValTunnels(0,m+1)===me&&(n.p.push(),n.p.imageMode(n.p.CENTER),n.p.image(n.bones,a.x+re*m+re/2,-(pe+1)*re+a.y+re/2),n.p.pop())}if(e.bottom){for(var c=0;c<3;c++)n.p.image(n.floors[e.floorGridTunnels[1][c]],a.x+re*(c-1),(pe+1)*re+a.y);n.p.image(n.vertWallT,2*-re+ae/2+(ie-ae)/2+1+a.x,(pe+1)*re+a.y),n.p.image(n.vertWallT,2*re-ae/2+(ie-ae)/2-1+a.x,(pe+1)*re+a.y);for(var g=-1;g<2;g++)e.getValTunnels(1,g+1)===me&&(n.p.push(),n.p.imageMode(n.p.CENTER),n.p.image(n.bones,a.x+re*g+re/2,(pe+1)*re+a.y+re/2),n.p.pop())}if(e.left){for(var u=0;u<3;u++)n.p.image(n.floors[e.floorGridTunnels[2][u]],-(pe+1)*re+a.x,a.y+re*(u-1));n.p.image(n.horzWall,-(pe+1)*re+a.x,a.y-ie-re),n.p.image(n.horzWallB,-(pe+1)*re+a.x,a.y+ie+re),n.p.image(n.vertWall,a.x-(pe+.5)*re-ae/2+(ie-ae)/2,re+a.y+re);for(var d=-1;d<2;d++)e.getValTunnels(2,d+1)===me&&(n.p.push(),n.p.imageMode(n.p.CENTER),n.p.image(n.bones,-(pe+1)*re+a.x+re/2,a.y+re*d+re/2),n.p.pop())}if(e.right){for(var h=0;h<3;h++)n.p.image(n.floors[e.floorGridTunnels[3][h]],(pe+1)*re+a.x,a.y+re*(h-1));n.p.image(n.horzWall,(pe+1)*re+a.x,a.y-ie-re),n.p.image(n.horzWallB,(pe+1)*re+a.x,a.y+ie+re),n.p.image(n.vertWall,a.x+(pe+.5)*re+ae/2+(ie-ae)/2,re+a.y+re);for(var f=-1;f<2;f++)e.getValTunnels(3,f+1)===me&&(n.p.push(),n.p.imageMode(n.p.CENTER),n.p.image(n.bones,(pe+1)*re+a.x+re/2,a.y+re*f+re/2),n.p.pop())}}},this.p=t,this.player=o},ye=R.a.game.powerups,ve=function e(t,o){var n=this;Object(w.a)(this,e),this.initiateRooms=function(){n.startingRoom=new te(0,0,n),n.rooms={"0,0":n.startingRoom};for(var e=[[0,1,n.startingRoom,"top"],[1,0,n.startingRoom,"left"],[0,-1,n.startingRoom,"bottom"],[-1,0,n.startingRoom,"right"]],t=["0,0"],o=[n.startingRoom],r=0;r<n.level;r++){var a=e.splice(Math.floor(Math.random()*e.length),1)[0];n.rooms[N.getRoomRep(a[0],a[1])]?r-=1:function(){a[2].end=!1;var r=new te(a[0],a[1],n);r[a[3]]=a[2],a[2][n.getOppositeDir(a[3])]=r;for(var i=n.getSurroundings(r),l=0;l<i.length;l++){var s=i[l];n.rooms[N.getRoomRep(s[0],s[1])]||e.push(s)}o.push(r);var p=N.getRoomRep(r.x,r.y);n.rooms[p]=r,t.push(p),Object.keys(ye).forEach(function(e){var t=ye[e];Math.random()<t.probability&&r.generatePowerup(t.gridVal)})}()}for(var i=[],l=0;l<o.length;l++){var s=o[l];s.end&&i.push(s)}var p=i[Math.floor(Math.random()*i.length)];p.updateGrid(0,0,2),n.endingGlobalCoords=N.relativeToGlobal(p.x,p.y)},this.update=function(){n.sprite.draw(n.rooms)},this.isRoomExists=function(e,t){return!!n.rooms[N.getRoomRep(e,t)]},this.getSurroundings=function(e){return[[e.x,e.y+1,e,"top"],[e.x+1,e.y,e,"left"],[e.x,e.y-1,e,"bottom"],[e.x-1,e.y,e,"right"]]},this.getOppositeDir=function(e){switch(e){case"bottom":return"top";case"left":return"right";case"top":return"bottom";case"right":return"left";default:return""}},this.getRoomByCoords=function(e,t){return n.rooms[N.getRoomRep(e,t)]},this.level=1,this.player=o,this.sprite=new fe(t,o),this.initiateRooms()},we=R.a.game.room.width,be=R.a.game.room.height,xe=R.a.game.room.radius,Ee=R.a.game.room.gridVals.enemy,Ae=function e(t){var o=this;Object(w.a)(this,e),this.move=function(e){for(var t=o.getSurroundings(o.roomCoords),n=o.getDist(N.relativeToGlobal(o.room.x+o.roomCoords.x/(we+1),o.room.y+o.roomCoords.y/(be+1)),e.controls.globalPos),r=o.roomCoords,a=0;a<t.length;a++){var i=o.getDist(N.relativeToGlobal(o.room.x+t[a].x/(we+1),o.room.y+t[a].y/(be+1)),e.controls.globalPos);i<n&&(r=t[a],n=i)}r.y===-xe-1?(o.room.updateTunnels(0,r.x+1,Ee),o.roomCoords=r):r.y===xe+1?(o.room.updateTunnels(1,r.x+1,Ee),o.roomCoords=r):r.x===-xe-1?(o.room.updateTunnels(2,r.y+1,Ee),o.roomCoords=r):r.x===xe+1?(o.room.updateTunnels(3,r.y+1,Ee),o.roomCoords=r):r.y<-xe-1?(o.room=o.room.top,o.room.updateTunnels(1,r.x+1,Ee),o.roomCoords=r,o.roomCoords.y=xe+1):r.y>xe+1?(o.room=o.room.bottom,o.room.updateTunnels(0,r.x+1,Ee),o.roomCoords=r,o.roomCoords.y=-xe-1):r.x<-xe-1?(o.room=o.room.left,o.room.updateTunnels(3,r.y+1,Ee),o.roomCoords=r,o.roomCoords.x=xe+1):r.x>xe+1?(o.room=o.room.right,o.room.updateTunnels(2,r.y+1,Ee),o.roomCoords=r,o.roomCoords.x=-xe-1):(o.room.updateGrid(r.x,r.y,Ee),o.roomCoords=r)},this.getSurroundings=function(e){for(var t=[{x:0,y:1},{x:1,y:0},{x:0,y:-1},{x:-1,y:0}],n=[],r=0;r<t.length;r++){var a=t[r],i={x:e.x+a.x,y:e.y+a.y};Math.abs(i.x)<=xe&&Math.abs(i.y)<=xe?n.push(i):i.x<=-xe-1&&Math.abs(i.y)<=1&&o.room.left?n.push(i):i.x>=xe+1&&Math.abs(i.y)<=1&&o.room.right?n.push(i):i.y<=-xe-1&&Math.abs(i.x)<=1&&o.room.top?n.push(i):i.y>=xe+1&&Math.abs(i.x)<=1&&o.room.bottom&&n.push(i)}return n},this.getDist=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},this.room=t,this.roomCoords=N.generateRandomEnemyPos()},Pe=R.a.game.player.light.far,Me=R.a.game.player.light.near,Re="transparent ".concat(Me,"px, rgba(0, 0, 0) ").concat(Pe,"px)"),Te=R.a.game.powerups.yellow,Ie="transparent ".concat(Te.lightNear,"px, rgba(0, 0, 0) ").concat(Te.lightFar,"px)");function Ce(e){var t=document.getElementById("spotlight");this.getSpotlight=function(){return t},this.getPlayer=function(){return e}}Ce.prototype.update=function(){var e=this.getSpotlight(),t=this.getPlayer(),o=t.controls.windowPos,n=o.x,r=o.y;e.style.backgroundImage="radial-gradient(circle at ".concat(n,"px ").concat(r,"px, ").concat(t.powerups.yellow?Ie:Re)};var Be=Ce,Ge=o(31),Ne=o.n(Ge),Oe=o(32),je=o.n(Oe),ke=o(33),We=o.n(ke),De=o(34),ze=o.n(De);function Ve(e,t){this.p=e,this.player=t,this.element=document.getElementById("effect"),this.effects={},this.sprites={}}Ve.prototype.loadSprites=function(){var e=this;this.sprites.yellow=[],this.p.loadImage(Ne.a,function(t){for(var o=0;o<8;o++)for(var n=100*o,r=0;r<(7===o?5:8);r++){var a=100*r,i=t.get(n,a,100,100);e.sprites.yellow.push(i)}}),this.sprites.blue=[],this.p.loadImage(ze.a,function(t){for(var o=0;o<8;o++)for(var n=100*o,r=0;r<(7===o?5:8);r++){var a=100*r,i=t.get(n,a,100,100);e.sprites.blue.push(i)}}),this.sprites.green=[],this.p.loadImage(je.a,function(t){for(var o=0;o<8;o++)for(var n=100*o,r=0;r<(7===o?5:8);r++){var a=100*r,i=t.get(n,a,100,100);e.sprites.green.push(i)}}),this.sprites.red=[],this.p.loadImage(We.a,function(t){for(var o=0;o<8;o++)for(var n=100*o,r=0;r<(7===o?5:8);r++){var a=100*r,i=t.get(n,a,100,100);e.sprites.red.push(i)}})},Ve.prototype.addEffect=function(e,t){this.effects[e]=t},Ve.prototype.removeEffect=function(e){delete this.effects[e]},Ve.prototype.draw=function(){var e=this,t=Object.keys(this.effects).map(function(t){return"".concat(e.effects[t],"<br/>")}).join(" ");this.element.innerHTML=t;var o=this.effects,n=o.YELLOW,r=o.BLUE,a=o.GREEN,i=o.RED,l=this.player.controls.windowPos,s=l.x,p=l.y,m=Math.floor(this.p.frameCount/2)%61;this.p.push(),this.p.imageMode(this.p.CENTER),n&&this.p.image(this.sprites.yellow[m],s+8+30*Math.cos(this.p.frameCount/16),p+0+30*Math.sin(this.p.frameCount/16),40,40),r&&this.p.image(this.sprites.blue[m],s+8+30*Math.cos(this.p.frameCount/16+Math.PI/2),p+0+30*Math.sin(this.p.frameCount/16+Math.PI/2),40,40),a&&this.p.image(this.sprites.green[m],s+8+30*Math.cos(this.p.frameCount/16+Math.PI),p+0+30*Math.sin(this.p.frameCount/16+Math.PI),40,40),i&&this.p.image(this.sprites.red[m],s+8+30*Math.cos(this.p.frameCount/16-Math.PI/2),p+0+30*Math.sin(this.p.frameCount/16-Math.PI/2),40,40),this.p.pop()};var Se=Ve,Ye=o(35),Ue=o.n(Ye),Qe=R.a.game.map.width,Ze=R.a.game.map.height,Fe=R.a.game.room.radius,He=R.a.game.room.gridVals.enemy,Le=R.a.game.room.gridVals.end,Je=R.a.game.room.gridVals.redPotion,Xe=R.a.game.room.gridVals.bluePotion,Ke=R.a.game.room.gridVals.yellowPotion,qe=R.a.game.room.gridVals.greenPotion,_e=R.a.game.enemy.speed,$e=R.a.game.enemy.levelUpFactor,et=R.a.game.powerups.red,tt=R.a.game.powerups.blue,ot=R.a.game.powerups.yellow,nt=R.a.game.powerups.green,rt=R.a.game.map.enemyIncrement,at=function e(t){var o=this;Object(w.a)(this,e),this.update=function(){o.map.update(),o.player.update(),o.spotlight.update(),o.effectIndicator.draw()},this.enemiesMove=function(){o.enemies.forEach(function(e){return e.move(o.player)}),o.checkPlayerPos()===He&&o.gameOver()},this.playerMove=function(){switch(o.checkPlayerPos()){case He:o.gameOver();break;case Le:o.levelUp();break;case Je:o.redPotionPowerup();break;case Xe:o.bluePotionPowerup();break;case Ke:o.yellowPotionPowerup();break;case qe:o.greenPotionPowerup()}},this.checkPlayerPos=function(){var e=o.player.getRoomNRoomCoords(),t=e[0],n=e[1],r=0;return Math.abs(n.x)<=Fe&&Math.abs(n.y)<=Fe?r=t.getVal(n.x,n.y):n.x<=-Fe-1&&Math.abs(n.y)<=1&&t.left?r=t.getValTunnels(2,n.y+1):n.x>=Fe+1&&Math.abs(n.y)<=1&&t.right?r=t.getValTunnels(3,n.y+1):n.y<=-Fe-1&&Math.abs(n.x)<=1&&t.top?r=t.getValTunnels(0,n.x+1):n.y>=Fe+1&&Math.abs(n.x)<=1&&t.bottom&&(r=t.getValTunnels(1,n.x+1)),r},this.levelUp=function(){o.map.level+=1,o.map.initiateRooms(),o.player.controls.globalPos={x:Qe/2,y:Ze/2},o.player.controls.windowPos={x:o.player.controls.p.width/2,y:o.player.controls.p.height/2};var e=Math.floor(o.map.level/rt)+1;o.enemies=[];for(var t=0;t<e;t++)o.enemies.push(new Ae(o.map.startingRoom));o.initiateEnemyMovement(_e*Math.pow($e,o.map.level));var n=document.getElementById("score");n&&(n.innerHTML="Level ".concat(o.map.level))},this.gameOver=function(){if(!o.player.powerups.red){var e=document.getElementById("gameover");e&&(e.style.top="50%"),o.p5instance.noLoop()}},this.redPotionPowerup=function(){o.powerupConsumed(),o.player.powerups.red=!0,o.redPotionTimeout&&clearTimeout(o.redPotionTimeout),o.effectIndicator.addEffect("RED",et.description),setTimeout(function(){o.player.powerups.red=!1,o.redPotionTimeout=void 0,o.effectIndicator.removeEffect("RED")},et.duration)},this.bluePotionPowerup=function(){o.powerupConsumed(),o.player.powerups.blue=!0,console.log("BLUE POWERUP UP"),o.bluePotionTimeout&&clearTimeout(o.bluePotionTimeout),o.effectIndicator.addEffect("BLUE",tt.description),o.bluePotionTimeout=setTimeout(function(){console.log("BLUE POWERUP DOWN"),o.player.powerups.blue=!1,o.bluePotionTimeout=void 0,o.effectIndicator.removeEffect("BLUE")},tt.duration)},this.yellowPotionPowerup=function(){o.powerupConsumed(),o.player.powerups.yellow=!0,console.log("YELLOW POWERUP UP"),o.yellowPotionTimeout&&clearTimeout(o.yellowPotionTimeout),o.effectIndicator.addEffect("YELLOW",ot.description),o.yellowPotionTimeout=setTimeout(function(){console.log("YELLOW POWERUP DOWN"),o.player.powerups.yellow=!1,o.yellowPotionTimeout=void 0,o.effectIndicator.removeEffect("YELLOW")},ot.duration)},this.greenPotionPowerup=function(){o.powerupConsumed(),o.player.powerups.green=!0,console.log("GREEN POWERUP UP"),clearInterval(o.monsterInterval),o.monsterInterval=setInterval(o.enemiesMove,nt.enemySpeed),o.greenPotionTimeout&&clearTimeout(o.greenPotionTimeout),o.effectIndicator.addEffect("GREEN",nt.description),o.greenPotionTimeout=setTimeout(function(){console.log("GREEN POWERUP DOWN"),clearInterval(o.monsterInterval),o.initiateEnemyMovement(),o.greenPotionTimeout=void 0,o.effectIndicator.removeEffect("GREEN")},nt.duration)},this.powerupConsumed=function(){var e=o.player.getRoomNRoomCoords(),t=e[0],n=e[1];t.updateGrid(n.x,n.y,0)},this.initiateEnemyMovement=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e;clearInterval(o.monsterInterval),o.monsterInterval=setInterval(o.enemiesMove,e)},this.terminate=function(){o.p5instance.remove(),clearInterval(o.monsterInterval)},this.sketch=function(e){o.player=new H(e,o.playerMove),o.map=new ve(e,o.player),o.enemies=[new Ae(o.map.startingRoom)],o.player.registerMap(o.map),o.spotlight=new Be(o.player),o.effectIndicator=new Se(e,o.player),e.preload=function(){o.map.sprite.loadSprite(),o.player.sprite.loadSprite(),o.effectIndicator.loadSprites()},e.setup=function(){e.createCanvas(N.getElementWidth(t),N.getElementHeight(t)).parent(t),e.textFont("Helvetica"),e.textAlign(e.CENTER,e.CENTER),e.smooth(),o.initiateEnemyMovement()},e.draw=function(){e.background("#160f30"),o.update()},e.windowResized=function(){e.resizeCanvas(N.getElementWidth(t),N.getElementHeight(t))}},this.p5instance=new Ue.a(this.sketch)},it=o(36),lt=o.n(it);function st(){var e=Object(n.a)(["\n  position: relative;\n  width: 80%;\n  height: 60%;\n  border: 25px solid #b88846;\n  border-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='75' height='75'%3E%3Cg fill='none' stroke='%23B88846' stroke-width='2'%3E%3Cpath d='M1 1h73v73H1z'/%3E%3Cpath d='M8 8h59v59H8z'/%3E%3Cpath d='M8 8h16v16H8zM51 8h16v16H51zM51 51h16v16H51zM8 51h16v16H8z'/%3E%3C/g%3E%3Cg fill='%23B88846'%3E%3Ccircle cx='16' cy='16' r='2'/%3E%3Ccircle cx='59' cy='16' r='2'/%3E%3Ccircle cx='59' cy='59' r='2'/%3E%3Ccircle cx='16' cy='59' r='2'/%3E%3C/g%3E%3C/svg%3E\")\n    25;\n"]);return st=function(){return e},e}function pt(){var e=Object(n.a)(["\n  margin: 20px;\n  border-bottom: 3px solid #eae7af;\n  color: #eae7af;\n  font-family: 'Lexend Zetta', sans-serif;\n  font-size: 40px;\n"]);return pt=function(){return e},e}function mt(){var e=Object(n.a)(["\n  width: 50px;\n  height: 25px;\n  margin: 5px;\n  border: 1px solid #eae7af;\n  border-radius: 5px;\n  background: transparent;\n  color: #eae7af;\n  font-size: 16px;\n  font-weight: 100;\n"]);return mt=function(){return e},e}function ct(){var e=Object(n.a)(["\n  display: flex;\n  position: absolute;\n  z-index: 10;\n  top: -20%;\n  left: 50%;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border: 10px solid #160f30;\n  border-radius: 5px;\n  background: #01024e;\n  color: #eae7af;\n  font-size: 50px;\n  transform: translate(-50%, -50%);\n  transition: 0.2s ease all;\n"]);return ct=function(){return e},e}function gt(){var e=Object(n.a)(["\n  position: absolute;\n  z-index: 20;\n  bottom: 0;\n  left: 0;\n  margin: 15px;\n  color: #eae7af;\n  font-family: 'Gayathri', sans-serif;\n  font-size: 24px;\n"]);return gt=function(){return e},e}function ut(){var e=Object(n.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-image: radial-gradient(\n    circle,\n    transparent 160px,\n    rgba(0, 0, 0) 200px\n  );\n  transition: 0.5s ease-in all;\n"]);return ut=function(){return e},e}function dt(){var e=Object(n.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n"]);return dt=function(){return e},e}function ht(){var e=Object(n.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  background: radial-gradient(#003, #000);\n"]);return ht=function(){return e},e}var ft=s.a.div(ht()),yt=s.a.div(dt()),vt=s.a.div(ut()),wt=s.a.div(gt()),bt=s.a.div(ct()),xt=s.a.button(mt()),Et=s.a.div(pt()),At=s.a.div(st()),Pt=function(){var e=Object(i.useRef)(null);return Object(i.useEffect)(function(){document.title="The Room";var t=new Audio(lt.a);t.play(),t.onended=function(){t.currentTime=0};var o=new at(e.current);return function(){t.pause(),t.currentTime=0,o.terminate()}},[e]),l.a.createElement(ft,null,l.a.createElement(bt,{id:"gameover"},"GAME OVER",l.a.createElement(p.b,{to:"/home"},l.a.createElement(xt,null,"Home"))),l.a.createElement(yt,{id:"debug"}),l.a.createElement(Et,{id:"score"},"Level 1"),l.a.createElement(At,{ref:e},l.a.createElement(wt,{id:"effect"}),l.a.createElement(vt,{id:"spotlight"})))},Mt=o(9),Rt=Object(Mt.g)(function(){return l.a.createElement(Mt.d,null,l.a.createElement(Mt.b,{path:"/home",component:v}),l.a.createElement(Mt.b,{path:"/game",component:Pt}),l.a.createElement(Mt.b,{path:"/",component:function(){return l.a.createElement(Mt.a,{to:"/home"})}}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Tt=o(37),It=o.n(Tt),Ct=l.a.createElement(p.a,null,l.a.createElement(Rt,null));It.a.render(Ct,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[41,1,2]]]);
//# sourceMappingURL=main.f3ac5b48.chunk.js.map